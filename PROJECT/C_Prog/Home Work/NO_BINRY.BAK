/*
	No. to Binary
*/

#include<stdio.h>
#include<conio.h>

int bin[20];
double n=0;

void  main()
{
    int k,i=0,j,flag=0,l;

clrscr();

	printf("\n\n\t\tEnter Decimal(upto 6 fractions) to convert Binary: ");
	scanf("%lf",&n);


	if(n<(float)0)
	{
	    n=n* -1;
	    flag=1;
	}

	for(i=0;i<20;i++)
	{
		bin[i]=-1;
	}

       //int to binary
       i=int_bin();

	    if((i+1)%2==0)
	    k=(i/2)+1;
	    else if((i+1)%2!=0)
	    k=i/2;

	    for(j=0;k>0;j++,i--)
	    {
	      l=bin[j];
	      bin[j]=bin[i];
	      bin[i]=l;
	      k-=1;
	    }
	    for(j=0;bin[j]!=-1;j++);
	    k=j;

	    //decimal fraction
	    frac_bin(j);

	    // -ve or +ve check
	    if(flag==1)
	    {
	       for(i=0;bin[i]!=-1;i++)
	       {
		if(bin[i]==0)
		   bin[i]=1;
		else
		   bin[i]=0;
	       }
	    }



	if(flag==1)
	    printf("\n\n\n\n\t\tDecimal Form: %lf",n* -1);
	else
	    printf("\n\n\n\n\t\tDecimal Form: %lf",n);
	printf("\n\n\t\tBinary Form: ");


	for(i=0;bin[i]!=-1;i++)
	{
	       if(k==i)
	       printf("%c",bin[i]);
	       else
	       printf("%d",bin[i]);
	}

getch();
}

int int_bin()
{
     int i;
     long int a=0;

	if(n>0&&n<1)
	return 0;

	  a=(int)n;

	for(i=0;a!=0;i++)
	{

	    if(a%2==0)
	    {
		bin[i]=0;
		a=a/2;
	    }
	    else if(a%2!=0)
	    {
		bin[i]=1;
		a=(a-1)/2;
	    }
       }
      return i;
}

int frac_bin(int j)
{
   double b=0;
   long int a=0;

	  a=(int)n;
	  b=n-(float)a;

       if(b>0 && b<(float)1)
       {
	  bin[j]=46;
	  j++;
	    for(;2!=1;j++)
	    {
		  b=b*2;

		      if(b>0&&b<1)
		      {
			  bin[j]=0;
		      }
		      else if(b>1)
		      {
			  b=b-(int)b;
			  bin[j]=1;
		      }
		      else if(b==1)
		      {
			  bin[j]=1;
			  break;
		      }
	     }
	}
	return 0;
}