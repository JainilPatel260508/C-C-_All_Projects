#include<conio.h>
#include<stdio.h>

struct invent_record
{
	char name[10];
	int number;
	float price;
	int quantity;
};
void main()
{
	struct invent_record item;
	char filename[10];
	int response;
	FILE *fp;
	long n;
	void append(struct invent_record *, FILE *);
	printf ("Type File Name:");
	scanf("%s",filename);
	clrscr();
	fp=fopen(filename,"a+");
	do
	{
	  append(&item,fp);
	  printf("\n item %s append.\n",item.name);
	  printf("\n do you want to add another item (1 for yes / 0 for no)?");
	  scanf("%d",&response);
	  }while(response == 1);

	  n=ftell(fp);
	  fclose(fp);
	  fp=fopen(filename,"r");

	  while(ftell(fp)<n)
	  {
		 if (feof(fp)!=0)
		 break;
		 fscanf(fp,"%s %d %f %d",item.name,&item.number,&item.price,&item.quantity);
		 fprintf(stdout,"%-8s %7d %8.2f %8d\n",item.name,item.number,item.price,item.quantity);
	       //printf("%-8s %7d %8.2f %8d\n",item.name,item.number,item.price,item.quantity);

	  }
	  fclose(fp);
	  getch();
	}

void append(struct invent_record *product,FILE *ptr)
{
	printf("item name:");
	scanf("%s",product->name);

	printf("item number:");
	scanf("%d",&product->number);

	printf("item price:");
	scanf("%f",&product->price);

	printf("Quantity:");
	scanf("%d",&product->quantity);

	fprintf(ptr,"%s %d %2.f %d",product->name,product->number,product->price,product->quantity);
}

